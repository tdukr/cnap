<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1" />
        <title>
            Адміністративні послуги в Україні
        </title>
        <!-- Leaflet -->
        <link rel="stylesheet" href="lib/leaflet/leaflet.css" />
        <script src="lib/leaflet/leaflet.js"></script>
        <script src="data/reg_3.geojson" ></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <!-- Custom CSS -->
        <link rel="stylesheet" href="lib/filter/custom.css">
        <!-- GoogleSearch -->
        <script src="lib/leaflet-google-places-autocomplete-master/src/js/leaflet-gplaces-autocomplete.js"></script>
        <link rel="stylesheet" href="lib/leaflet-google-places-autocomplete-master/src/css/leaflet-gplaces-autocomplete.css" />
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA85rH-shSVGTftaXcECnFRT3LKfbpVg3w&libraries=places"></script>
    </head>
    <body>
            <div id="legend_pr">* Світлий фон відображає об'єкти на етапі створення</div>
            <div id="map"></div>
            <div id="infopanel">
                <div id="mapname">Мережа Центрів надання адміністративних послуг в Україні</div>
                <div id="textinfo" style="text-align: center">Карта відображає мережу Центрів надання адміністративних послуг в Україні.<br /><br />

Головними завданнями карти, окрім загального відображення є:<br /><br />

Показати діяльність донорських проектів в Україні. Це є ключовим завданням. Для цього розроблено можливість фільтрації даних на різних рівнях зближення. На кожному рівні карта виконує свої специфічні функції: від відображення загальної ситуації в країні, до фіксації кожного окремого ЦНАПу.<br /><br />

Надати інформацію стосовно роботи ЦНАПів.<br /><br /><br /><i>Натисність на обраний об'єкт для перегляду детальної інформації<i></div>
            </div>
            <div id="filter">
                <div id="legend_name">Проекти та донорські організації</div>
                <div id="left">
                    <div class='legend'>EGAP</div>
                    <div class='legend'>U-LEAD</div>
                    <div class='legend'>GIZ</div>
                    <div class='legend'>EU Project</div>
                    <div class='legend'>UNDP</div>
                    <div class='legend' style="padding: 15px 10px 0px 10px">Без підтримки донорів</div>
                </div>
                <div id="right">
                    <div style="margin: 10px 60px 0px 0px"><input type="checkbox" class="squaredTwo" value="egap" id="egap" name="check" checked /> 
                    <label for="egap"></label></div>
                    <div style="margin-top: 38px"><input type="checkbox" class="squaredTwo" value="ulead" id="ulead" name="check" checked /> 
                    <label for="ulead"></label></div>
                    <div style="margin-top: 67px"><input type="checkbox" class="squaredTwo" value="giz" id="giz" name="check" checked /> 
                    <label for="giz"></label></div>
                    <div style="margin-top: 96px"><input type="checkbox" class="squaredTwo" value="euproject" id="euproject" name="check" checked /> 
                    <label for="euproject"></label></div>
                    <div style="margin-top: 125px"><input type="checkbox" class="squaredTwo" value="undp" id="undp" name="check" checked /> 
                    <label for="undp"></label></div>
                    <div style="margin-top: 160px"><input type="checkbox" class="squaredTwo" style="margin-top: 20px" value="rest" id="rest" name="check" checked /> 
                    <label for="rest"></label></div>          
                </div>
            </div>
        <script>
            
            var regionLayer
            
            function highlightFeature(e){
                var layer = e.target;
                layer.setStyle(
                    {
                    weight: 3,
                    color: 'red',
                    fillColor: 'orange',
                    fillOpacity: 0.2
                    }
                );
                if(!L.Browser.ie && !L.Browser.opera){
                layer.bringToBack();
                }
            };
            
            function resetHighlight(e){
                regionLayer.resetStyle(e.target);
            };
            
            function zoomToFeature(e){
                map.fitBounds(e.target.getBounds());
            };
            
            var cnap_20Layer             
            
            var map = L.map('map');
            
            var southWest = L.latLng(40.00, 20.00),
            northEast = L.latLng(55.00, 43.00),
            bounds = L.latLngBounds(southWest, northEast);
            

            //basemap layer
            L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibXlrb2xhLWtvenlyIiwiYSI6ImNpemNzeHBhaDAwNHkycW8wZm40OHptdTMifQ.6q-bTx4fwm9Ch-knzk1i3Q', {
                maxZoom: 18,
                attribution: '<a&copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors | ' +
                    'Imagery © <a href="http://mapbox.com">Mapbox</a>',
                id: 'mapbox.streets'
            }).addTo(map);
            
            //INFOPANEL
            function onEachFeaturePointsPopup(feature, layer){
                layer.on({
                    click: function information(){
                        document.getElementById('textinfo').innerHTML = '<font size="+0.3">'+feature.properties.name+'</font>'+'<br>'+'<br>'+'<font size="-1">Графік роботи:<br>'+feature.properties.schedule+'</font><br>'+'<br>'+'<a target="_blank" href="'+feature.properties.url+'">Офіційний сайт</a>'+'<br><br><font size="-1.9">Кількість адміністраторів: '+feature.properties.work_num+'<br>Кількість видів послуг: '+feature.properties.num_serv+'<br><br>'+feature.properties.serv_text+'</font>'
                    }
                })
            };
            //REGION SECTION
            function onEachFeatureReg(feature, layer) {
                layer.on(
                    {
                        mouseover : highlightFeature,
                        mouseout : resetHighlight,
                        click : zoomToFeature
                    }
                )
            };         
            
            function regStyle(feature){
                return {
                    fillColor: 'white',
                    weight: 2,
                    fillOpacity: 0.2,
                    color: 'white',
                    dashArray: 3,
                    opacity: 0.8,
                }
            };

            regionLayer = L.geoJson(reg_3, {
                style: regStyle,
                onEachFeature : onEachFeatureReg
            }).addTo(map);
            
            
            // POINTS SECTION
            // STYLES
            // permanent style

            function pointStyle_perm(feature){
                return {
                    radius: 1,
                    fillColor: "orange",
                    color: "orange",
                    weight: 1,
                    opacity: 0.6,
                    fillOpacity: 0.7
                }
            };

            function pointStyle_GIZ_perm(feature){
                return {
                    radius: 1,
                    fillColor: "red",
                    color: "red",
                    weight: 1,
                    opacity: 0.6,
                    fillOpacity: 0.7   
                }
            };

            function pointStyle_ULEAD_perm(feature){
                return {
                    radius: 1,
                    fillColor: "green",
                    color: "green",
                    weight: 1,
                    opacity: 0.6,
                    fillOpacity: 0.7   
                }
            };

            function pointStyle_undp_perm(feature){
                return {
                    radius: 1,
                    fillColor: "blue",
                    color: "blue",
                    weight: 1,
                    opacity: 0.6,
                    fillOpacity: 0.7   
                }
            };

            function pointStyle_eu_perm(feature){
                return {
                    radius: 1,
                    fillColor: '#fbff01',
                    color: '#fbff01',
                    weight: 1,
                    opacity: 0.6,
                    fillOpacity: 0.7   
                }
            };            
            
            function pointStyle_EGAP_perm(feature){
                return {
                    radius: 1,
                    fillColor: '#8A2BE2',
                    color: '#8A2BE2',
                    weight: 1,
                    opacity: 0.6,
                    fillOpacity: 0.7   
                }
            };                        
            // ZOOM 5
            function pointStyle(feature){
                return {
                    radius: 2,
                    fillColor: "orange",
                    color: "orange",
                    weight: 1,
                    opacity: 0.6,
                    fillOpacity: 0.7
                }
            };

            function pointStyle_GIZ_5(feature){
                return {
                    radius: 2,
                    fillColor: "red",
                    color: "red",
                    weight: 1,
                    opacity: 0.6,
                    fillOpacity: 0.7   
                }
            };

            function pointStyle_GIZ_5_pr(feature){
                return {
                    radius: 2,
                    fillColor: "white",
                    color: "red",
                    weight: 1,
                    opacity: 0.6,
                    fillOpacity: 0.7   
                }
            };            
            
            function pointStyle_ULEAD_5(feature){
                return {
                    radius: 2,
                    fillColor: "green",
                    color: "green",
                    weight: 1,
                    opacity: 0.6,
                    fillOpacity: 0.7   
                }
            };
            
            function pointStyle_ULEAD_5_pr(feature){
                return {
                    radius: 2,
                    fillColor: "white",
                    color: "green",
                    weight: 1,
                    opacity: 0.6,
                    fillOpacity: 0.7   
                }
            };            
            
            function pointStyle_undp_5(feature){
                return {
                    radius: 2,
                    fillColor: "blue",
                    color: "blue",
                    weight: 1,
                    opacity: 0.6,
                    fillOpacity: 0.7   
                }
            };

            function pointStyle_EGAP_5_pr(feature){
                return {
                    radius: 2,
                    fillColor: "white",
                    color: '#8A2BE2',
                    weight: 1,
                    opacity: 0.6,
                    fillOpacity: 0.7   
                }
            };            
            
            function pointStyle_eu_5(feature){
                return {
                    radius: 2,
                    fillColor: '#fbff01',
                    color: '#fbff01',
                    weight: 1,
                    opacity: 0.6,
                    fillOpacity: 0.7   
                }
            };

            function pointStyle_EGAP_5(feature){
                return {
                    radius: 2,
                    fillColor: '#8A2BE2',
                    color: '#8A2BE2',
                    weight: 1,
                    opacity: 0.6,
                    fillOpacity: 0.7   
                }
            };

            function pointStyle_eu_5_pr(feature){
                return {
                    radius: 2,
                    fillColor: 'white',
                    color: '#fbff01',
                    weight: 1,
                    opacity: 0.6,
                    fillOpacity: 0.7   
                }
            };            
            
            // ZOOOM 6
            function pointStyle_ULEAD_6(feature){
                return {
                    radius: 3.5,
                    fillColor: "green",
                    color: "#004c00",
                    weight: 1.4,
                    opacity: 0.6,
                    fillOpacity: 0.6   
                }
            };

            function pointStyle_ULEAD_6_pr(feature){
                return {
                    radius: 3.5,
                    fillColor: "white",
                    color: "#004c00",
                    weight: 1.4,
                    opacity: 0.6,
                    fillOpacity: 0.6   
                }
            }; 

            function pointStyle_GIZ_6(feature){
                return {
                    radius: 3.5,
                    fillColor: "red",
                    color: '#7f0000',
                    weight: 1.4,
                    opacity: 0.6,
                    fillOpacity: 0.6   
                }
            };

            function pointStyle_GIZ_6_pr(feature){
                return {
                    radius: 3.5,
                    fillColor: "white",
                    color: '#7f0000',
                    weight: 1.4,
                    opacity: 0.6,
                    fillOpacity: 0.6   
                }
            };            
            
            function pointStyle_undp_6(feature){
                return {
                    radius: 3.5,
                    fillColor: "blue",
                    color: "#00007f",
                    weight: 1.4,
                    opacity: 0.6,
                    fillOpacity: 0.6   
                }
            };
            
            function pointStyle_EGAP_6_pr(feature){
                return {
                    radius: 3.5,
                    fillColor: "white",
                    color: "#6e22b4",
                    weight: 1.4,
                    opacity: 0.6,
                    fillOpacity: 0.6   
                }
            };

            function pointStyle_6(feature){
                return {
                    radius: 3.5,
                    fillColor: "orange",
                    color: "#7f5200",
                    weight: 1.4,
                    opacity: 0.6,
                    fillOpacity: 0.6   
                }
            };
           
            
            function pointStyle_eu_6(feature){
                return {
                    radius: 3.5,
                    fillColor: '#fbff01',
                    color: '#7f6b00',
                    weight: 1.4,
                    opacity: 0.6,
                    fillOpacity: 0.6   
                }
            };

            function pointStyle_eu_6_pr(feature){
                return {
                    radius: 3.5,
                    fillColor: 'white',
                    color: '#7f6b00',
                    weight: 1.4,
                    opacity: 0.6,
                    fillOpacity: 0.6   
                }
            }; 

            function pointStyle_EGAP_6(feature){
                return {
                    radius: 3.5,
                    fillColor: '#8A2BE2',
                    color: '#6e22b4',
                    weight: 1.4,
                    opacity: 0.6,
                    fillOpacity: 0.6   
                }
            };

            // ZOOM 7
            var giz_7_style = L.icon({
                iconUrl: 'data/egap_7.svg',
                iconSize: [16, 16],
                iconAnchor: [8,8]
            });

            var giz_7_pr_style = L.icon({
                iconUrl: 'data/egap_pr_7.svg',
                iconSize: [16, 16],
                iconAnchor: [8,8]
            });

            var ulead_7_style = L.icon({
                iconUrl: 'data/rest_7.svg',
                iconSize: [16, 16],
                iconAnchor: [8,8]
            });

            var ulead_7_pr_style = L.icon({
                iconUrl: 'data/rest_7_pr.svg',
                iconSize: [16, 16],
                iconAnchor: [8,8]
            });

            var undp_7_style = L.icon({
                iconUrl: 'data/ulead_7.svg',
                iconSize: [16, 16],
                iconAnchor: [8,8]
            });

            var euproject_7_style = L.icon({
                iconUrl: 'data/euproject_7.svg',
                iconSize: [16, 16],
                iconAnchor: [8,8]
            });

            var euproject_7_pr_style = L.icon({
                iconUrl: 'data/euproject_pr_7.svg',
                iconSize: [16, 16],
                iconAnchor: [8,8]
            });

            var egap_7_style = L.icon({
                iconUrl: 'data/undp_7.svg',
                iconSize: [16, 16],
                iconAnchor: [8,8]
            });
            var egap_7_pr_style = L.icon({
                iconUrl: 'data/undp_pr_7.svg',
                iconSize: [16, 16],
                iconAnchor: [8,8]
            });

            var rest_7_style = L.icon({
                iconUrl: 'data/giz_7.svg',
                iconSize: [16, 16],
                iconAnchor: [8,8]
            });                                    

            // ZOOM 8
            var giz_8_style = L.icon({
                iconUrl: 'data/egap_8.svg',
                iconSize: [24, 24],
                iconAnchor: [12,12]
            });

            var giz_8_pr_style = L.icon({
                iconUrl: 'data/egap_pr_8.svg',
                iconSize: [24, 24],
                iconAnchor: [12,12]
            });

            var ulead_8_style = L.icon({
                iconUrl: 'data/rest_8.svg',
                iconSize: [24, 24],
                iconAnchor: [12,12]
            });

            var ulead_8_pr_style = L.icon({
                iconUrl: 'data/rest_8_pr.svg',
                iconSize: [24, 24],
                iconAnchor: [12,12]
            });

            var undp_8_style = L.icon({
                iconUrl: 'data/ulead_8.svg',
                iconSize: [24, 24],
                iconAnchor: [12,12]
            });

            // var giz_8_pr_style = L.icon({
            //     iconUrl: 'data/ulead_pr_8.svg',
            //     iconSize: [24, 24],
            //     iconAnchor: [12,12]
            // });            

            var euproject_8_style = L.icon({
                iconUrl: 'data/euproject_8.svg',
                iconSize: [24, 24],
                iconAnchor: [12,12]
            });

            var euproject_8_pr_style = L.icon({
                iconUrl: 'data/euproject_pr_8.svg',
                iconSize: [24, 24],
                iconAnchor: [12,12]
            });

            var egap_8_style = L.icon({
                iconUrl: 'data/undp_8.svg',
                iconSize: [24, 24],
                iconAnchor: [12,12]
            });

            var egap_8_pr_style = L.icon({
                iconUrl: 'data/undp_pr_8.svg',
                iconSize: [24, 24],
                iconAnchor: [12,12]
            });

            var rest_8_style = L.icon({
                iconUrl: 'data/giz_8.svg',
                iconSize: [24, 24],
                iconAnchor: [12,12]
            });          

            // GEOJSON LAYER WITH JQUERY
            $.getJSON("data/cnap_20.geojson", function(response){
                console.log("response", response);

                var rest_5 = new L.geoJson(response,{
                style: pointStyle,
                filter: function(feature, layer){
                    return feature.properties.donor == null;
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var rest_perm = new L.geoJson(response,{
                style: pointStyle_perm,
                filter: function(feature, layer){
                    return feature.properties.donor == null;
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });
                map.addLayer(rest_perm)

                var egap_5 = new L.geoJson(response,{
                style: pointStyle_EGAP_5,
                filter: function(feature, layer){
                    return feature.properties.donor == "EGAP Program";
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var egap_perm = new L.geoJson(response,{
                style: pointStyle_EGAP_perm,
                filter: function(feature, layer){
                    return feature.properties.donor == "EGAP Program";
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });
                map.addLayer(egap_perm)

                var egap_5_pr = new L.geoJson(response,{
                style: pointStyle_EGAP_5_pr,
                filter: function(feature, layer){
                    return feature.properties.donor == "egap_pr";
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var egap_pr_perm = new L.geoJson(response,{
                style: pointStyle_EGAP_perm,
                filter: function(feature, layer){
                    return feature.properties.donor == "egap_pr";
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });
                map.addLayer(egap_pr_perm)

                var ulead_5 = new L.geoJson(response,{
                style: pointStyle_ULEAD_5,
                filter: function(feature, layer){
                    return feature.properties.donor == "U-LEAD";
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var ulead_perm = new L.geoJson(response,{
                style: pointStyle_ULEAD_perm,
                filter: function(feature, layer){
                    return feature.properties.donor == "U-LEAD";
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });                
                map.addLayer(ulead_perm)

                var ulead_5_pr = new L.geoJson(response,{
                style: pointStyle_ULEAD_5_pr,
                filter: function(feature, layer){
                    return feature.properties.donor == "U-LEAD_pr";
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var ulead_pr_perm = new L.geoJson(response,{
                style: pointStyle_ULEAD_perm,
                filter: function(feature, layer){
                    return feature.properties.donor == "U-LEAD_pr";
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });                
                map.addLayer(ulead_pr_perm)                

                var giz_5 = new L.geoJson(response,{
                style: pointStyle_GIZ_5,
                filter: function(feature, layer){
                    return feature.properties.donor == "GIZ";
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var giz_perm = new L.geoJson(response,{
                style: pointStyle_GIZ_perm,
                filter: function(feature, layer){
                    return feature.properties.donor == "GIZ";
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });
                map.addLayer(giz_perm)

                var giz_5_pr = new L.geoJson(response,{
                style: pointStyle_GIZ_5_pr,
                filter: function(feature, layer){
                    return feature.properties.donor == "giz_pr";
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var giz_pr_perm = new L.geoJson(response,{
                style: pointStyle_GIZ_perm,
                filter: function(feature, layer){
                    return feature.properties.donor == "giz_pr";
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });
                map.addLayer(giz_pr_perm)                

                var euproject_5 = new L.geoJson(response,{
                style: pointStyle_eu_5,
                filter: function(feature, layer){
                    return feature.properties.donor == "EU Project";
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var euproject_perm = new L.geoJson(response,{
                style: pointStyle_eu_perm,
                filter: function(feature, layer){
                    return feature.properties.donor == "EU Project";
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    }); 
                map.addLayer(euproject_perm)

                var euproject_5_pr = new L.geoJson(response,{
                style: pointStyle_eu_5_pr,
                filter: function(feature, layer){
                    return feature.properties.donor == "eu_pr";
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var euproject_pr_perm = new L.geoJson(response,{
                style: pointStyle_eu_perm,
                filter: function(feature, layer){
                    return feature.properties.donor == "eu_pr";
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    }); 
                map.addLayer(euproject_pr_perm)                

                var undp_5 = new L.geoJson(response,{
                style: pointStyle_undp_5,
                filter: function(feature, layer){
                    return feature.properties.donor == "undp";
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var undp_perm = new L.geoJson(response,{
                style: pointStyle_undp_perm,
                filter: function(feature, layer){
                    return feature.properties.donor == "undp";
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    }); 
                map.addLayer(undp_perm)

                var rest_6 = new L.geoJson(response,{
                style: pointStyle_6,
                filter: function(feature, layer){
                    return feature.properties.donor == null;
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var egap_6 = new L.geoJSON(response,{
                style: pointStyle_EGAP_6,
                filter: function(feature, layer){
                    return feature.properties.donor == "EGAP Program";
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var egap_6_pr = new L.geoJSON(response,{
                style: pointStyle_EGAP_6_pr,
                filter: function(feature, layer){
                    return feature.properties.donor == "egap_pr";
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });                
                        
                var ulead_6 = new L.geoJSON(response,{
                style: pointStyle_ULEAD_6,
                filter: function(feature, layer){
                    return feature.properties.donor == "U-LEAD";
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });
                
                var ulead_6_pr = new L.geoJSON(response,{
                style: pointStyle_ULEAD_6_pr,
                filter: function(feature, layer){
                    return feature.properties.donor == "U-LEAD_pr";
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var giz_6 = new L.geoJSON(response,{
                style: pointStyle_GIZ_6,
                filter: function(feature, layer){
                    return feature.properties.donor == "GIZ";
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var giz_6_pr = new L.geoJSON(response,{
                style: pointStyle_GIZ_6_pr,
                filter: function(feature, layer){
                    return feature.properties.donor == "giz_pr";
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });                

                var euproject_6 = new L.geoJSON(response,{
                style: pointStyle_eu_6,
                filter: function(feature, layer){
                    return feature.properties.donor == "EU Project";
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var euproject_6_pr = new L.geoJSON(response,{
                style: pointStyle_eu_6_pr,
                filter: function(feature, layer){
                    return feature.properties.donor == "eu_pr";
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });            

                var undp_6 = new L.geoJSON(response,{
                style: pointStyle_undp_6,
                filter: function(feature, layer){
                    return feature.properties.donor == "undp";
                    },
                pointToLayer: function (feature, latlng) {
                    var circle =  L.circleMarker(latlng,pointStyle);
                    return circle;
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });    

                var rest_7 = new L.geoJSON(response,{
                filter: function(feature, layer){
                    return feature.properties.donor == null;
                    },
                pointToLayer: function (feature, latlng) {
                    return L.marker(latlng, {icon: rest_7_style});
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var egap_7 = new L.geoJSON(response,{
                filter: function(feature, layer){
                    return feature.properties.donor == "EGAP Program";
                    },
                pointToLayer: function (feature, latlng) {
                    return L.marker(latlng, {icon: egap_7_style});
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var egap_7_pr = new L.geoJSON(response,{
                filter: function(feature, layer){
                    return feature.properties.donor == "egap_pr";
                    },
                pointToLayer: function (feature, latlng) {
                    return L.marker(latlng, {icon: egap_7_pr_style});
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });                
                        
                var ulead_7 = new L.geoJSON(response,{
                filter: function(feature, layer){
                    return feature.properties.donor == "U-LEAD";
                    },
                pointToLayer: function (feature, latlng) {
                    return L.marker(latlng, {icon: ulead_7_style});
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var ulead_7_pr = new L.geoJSON(response,{
                filter: function(feature, layer){
                    return feature.properties.donor == "U-LEAD_pr";
                    },
                pointToLayer: function (feature, latlng) {
                    return L.marker(latlng, {icon: ulead_7_pr_style});
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });                
                        
                var giz_7 = new L.geoJSON(response,{
                filter: function(feature, layer){
                    return feature.properties.donor == "GIZ";
                    },
                pointToLayer: function (feature, latlng) {
                    return L.marker(latlng, {icon: giz_7_style});
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var giz_7_pr = new L.geoJSON(response,{
                filter: function(feature, layer){
                    return feature.properties.donor == "giz_pr";
                    },
                pointToLayer: function (feature, latlng) {
                    return L.marker(latlng, {icon: giz_7_pr_style});
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var euproject_7 = new L.geoJSON(response,{
                filter: function(feature, layer){
                    return feature.properties.donor == "EU Project";
                    },
                pointToLayer: function (feature, latlng) {
                    return L.marker(latlng, {icon: euproject_7_style});
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var euproject_7_pr = new L.geoJSON(response,{
                filter: function(feature, layer){
                    return feature.properties.donor == "eu_pr";
                    },
                pointToLayer: function (feature, latlng) {
                    return L.marker(latlng, {icon: euproject_7_pr_style});
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });       

                var undp_7 = new L.geoJSON(response,{
                filter: function(feature, layer){
                    return feature.properties.donor == "undp";
                    },
                pointToLayer: function (feature, latlng) {
                    return L.marker(latlng, {icon: undp_7_style});
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });
                
                var rest_8 = new L.geoJSON(response,{
                filter: function(feature, layer){
                    return feature.properties.donor == null;
                    },
                pointToLayer: function (feature, latlng) {
                    return L.marker(latlng, {icon: rest_8_style});
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var egap_8 = new L.geoJSON(response,{
                filter: function(feature, layer){
                    return feature.properties.donor == "EGAP Program";
                    },
                pointToLayer: function (feature, latlng) {
                    return L.marker(latlng, {icon: egap_8_style});
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var egap_8_pr = new L.geoJSON(response,{
                filter: function(feature, layer){
                    return feature.properties.donor == "egap_pr";
                    },
                pointToLayer: function (feature, latlng) {
                    return L.marker(latlng, {icon: egap_8_pr_style});
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var ulead_8 = new L.geoJSON(response,{
                filter: function(feature, layer){
                    return feature.properties.donor == "U-LEAD";
                    },
                pointToLayer: function (feature, latlng) {
                    return L.marker(latlng, {icon: ulead_8_style});
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var ulead_8_pr = new L.geoJSON(response,{
                filter: function(feature, layer){
                    return feature.properties.donor == "U-LEAD_pr";
                    },
                pointToLayer: function (feature, latlng) {
                    return L.marker(latlng, {icon: ulead_8_pr_style});
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });                

                var giz_8 = new L.geoJSON(response,{
                filter: function(feature, layer){
                    return feature.properties.donor == "GIZ";
                    },
                pointToLayer: function (feature, latlng) {
                    return L.marker(latlng, {icon: giz_8_style});
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var giz_8_pr = new L.geoJSON(response,{
                filter: function(feature, layer){
                    return feature.properties.donor == "giz_pr";
                    },
                pointToLayer: function (feature, latlng) {
                    return L.marker(latlng, {icon: giz_8_pr_style});
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var euproject_8 = new L.geoJSON(response,{
                filter: function(feature, layer){
                    return feature.properties.donor == "EU Project";
                    },
                pointToLayer: function (feature, latlng) {
                    return L.marker(latlng, {icon: euproject_8_style});
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                var euproject_8_pr = new L.geoJSON(response,{
                filter: function(feature, layer){
                    return feature.properties.donor == "eu_pr";
                    },
                pointToLayer: function (feature, latlng) {
                    return L.marker(latlng, {icon: euproject_8_pr_style});
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });     

                var undp_8 = new L.geoJSON(response,{
                filter: function(feature, layer){
                    return feature.properties.donor == "undp";
                    },
                pointToLayer: function (feature, latlng) {
                    return L.marker(latlng, {icon: undp_8_style});
                },
                onEachFeature: onEachFeaturePointsPopup,
                    });

                map.on('zoomend ', function(e) {
                if ( map.getZoom() <= 5 && map.getZoom() < 6){ 
                    if (map.hasLayer(rest)) {
                        map.removeLayer(rest);
                        rest = rest_5;
                        map.addLayer(rest);
                    }
                    else {
                        map.removeLayer(rest);
                        rest = rest_5;
                    };
                    if (map.hasLayer(egap)) {
                        map.removeLayer(egap);
                        egap = L.layerGroup([egap_5, egap_5_pr]);
                        map.addLayer(egap);
                    }
                    else {
                        map.removeLayer(egap);
                        egap = L.layerGroup([egap_5, egap_5_pr]);
                    };           
                    if (map.hasLayer(ulead)) {
                        map.removeLayer(ulead);
                        ulead = L.layerGroup([ulead_5, ulead_5_pr]);
                        map.addLayer(ulead);
                    }
                    else {
                        map.removeLayer(ulead);
                        ulead = L.layerGroup([ulead_5, ulead_5_pr]);
                    };
                    if (map.hasLayer(giz)) {
                        map.removeLayer(giz);
                        giz = L.layerGroup([giz_5, giz_5_pr]);
                        map.addLayer(giz);
                    }
                    else {
                        map.removeLayer(giz);
                        giz = L.layerGroup([giz_5, giz_5_pr]);
                    };
                    if (map.hasLayer(euproject)) {
                        map.removeLayer(euproject);
                        euproject = L.layerGroup([euproject_5, euproject_5_pr]);
                        map.addLayer(euproject);
                    }
                    else {
                        map.removeLayer(euproject);
                        euproject = L.layerGroup([euproject_5, euproject_5_pr]);
                    };
                    if (map.hasLayer(undp)) {
                        map.removeLayer(undp);
                        undp = undp_5;
                        map.addLayer(undp);
                    }
                    else {
                        map.removeLayer(undp);
                        undp = undp_5;
                    };   
                    map.addLayer(regionLayer);
                }
                else if ( map.getZoom() >= 6 && map.getZoom() < 7){ 
                    if (map.hasLayer(rest)) {
                        map.removeLayer(rest);
                        rest = rest_6;
                        map.addLayer(rest);
                    }
                    else {
                        map.removeLayer(rest);
                        rest = rest_6;
                    };
                    if (map.hasLayer(egap)) {
                        map.removeLayer(egap);
                        egap = L.layerGroup([egap_6, egap_6_pr]);
                        map.addLayer(egap);
                    }
                    else {
                        map.removeLayer(egap);
                        egap = L.layerGroup([egap_6, egap_6_pr]);
                    };                    
                    if (map.hasLayer(ulead)) {
                        map.removeLayer(ulead);
                        ulead = L.layerGroup([ulead_6, ulead_6_pr])
                        map.addLayer(ulead);
                    }
                    else {
                        map.removeLayer(ulead);
                        ulead = L.layerGroup([ulead_6, ulead_6_pr])
                    };
                    if (map.hasLayer(giz)) {
                        map.removeLayer(giz);
                        giz = L.layerGroup([giz_6, giz_6_pr]);
                        map.addLayer(giz);
                    }
                    else {
                        map.removeLayer(giz);
                        giz = L.layerGroup([giz_6, giz_6_pr]);
                    };
                    if (map.hasLayer(euproject)) {
                        map.removeLayer(euproject);
                        euproject = L.layerGroup([euproject_6, euproject_6_pr]);
                        map.addLayer(euproject);
                    }
                    else {
                        map.removeLayer(euproject);
                        euproject = L.layerGroup([euproject_6, euproject_6_pr]);
                    };
                    if (map.hasLayer(undp)) {
                        map.removeLayer(undp);
                        undp = undp_6;
                        map.addLayer(undp);
                    }
                    else {
                        map.removeLayer(undp);
                        undp = undp_6;
                    };
                    map.addLayer(regionLayer);               
                }
                else if (map.getZoom() >= 7 && map.getZoom() < 8){
                    map.addLayer(regionLayer);
                    if (map.hasLayer(rest)) {
                        map.removeLayer(rest);
                        rest = rest_7;
                        map.addLayer(rest);
                    }
                    else {
                        map.removeLayer(rest);
                        rest = rest_7;
                    }
                    if (map.hasLayer(egap)) {
                        map.removeLayer(egap);
                        egap = L.layerGroup([egap_7, egap_7_pr]);
                        map.addLayer(egap);
                    }
                    else {
                        map.removeLayer(egap);
                        egap = L.layerGroup([egap_7, egap_7_pr]);
                    };                    
                    if (map.hasLayer(ulead)) {
                        map.removeLayer(ulead);
                        ulead = L.layerGroup([ulead_7, ulead_7_pr]);
                        map.addLayer(ulead);
                    }
                    else {
                        map.removeLayer(ulead);
                        ulead = L.layerGroup([ulead_7, ulead_7_pr]);
                    };
                    if (map.hasLayer(giz)) {
                        map.removeLayer(giz);
                        giz = L.layerGroup([giz_7, giz_7_pr]);
                        map.addLayer(giz);
                    }
                    else {
                        map.removeLayer(giz);
                        giz = L.layerGroup([giz_7, giz_7_pr]);
                    };
                    if (map.hasLayer(euproject)) {
                        map.removeLayer(euproject);
                        euproject = L.layerGroup([euproject_7, euproject_7_pr]);
                        map.addLayer(euproject);
                    }
                    else {
                        map.removeLayer(euproject);
                        euproject = L.layerGroup([euproject_7, euproject_7_pr]);
                    };
                    if (map.hasLayer(undp)) {
                        map.removeLayer(undp);
                        undp = undp_7;
                        map.addLayer(undp);
                    }
                    else {
                        map.removeLayer(undp);
                        undp = undp_7;
                    }
                }
                else if (map.getZoom() >= 8) {
                    map.removeLayer(regionLayer);
                    if (map.hasLayer(rest)) {
                        map.removeLayer(rest);
                        rest = rest_8;
                        map.addLayer(rest);
                    }
                    else {
                        map.removeLayer(rest);
                        rest = rest_8;
                    }
                    if (map.hasLayer(egap)) {
                        map.removeLayer(egap);
                        egap = L.layerGroup([egap_8, egap_8_pr]);
                        map.addLayer(egap);
                    }
                    else {
                        map.removeLayer(egap);
                        egap = L.layerGroup([egap_8, egap_8_pr]);
                    };                    
                    if (map.hasLayer(ulead)) {
                        map.removeLayer(ulead);
                        ulead = L.layerGroup([ulead_8, ulead_8_pr]);
                        map.addLayer(ulead);
                    }
                    else {
                        map.removeLayer(ulead);
                        ulead = L.layerGroup([ulead_8, ulead_8_pr]);
                    };
                    if (map.hasLayer(giz)) {
                        map.removeLayer(giz);
                        giz = L.layerGroup([giz_8, giz_8_pr]);
                        map.addLayer(giz);
                    }
                    else {
                        map.removeLayer(giz);
                        giz = L.layerGroup([giz_8, giz_8_pr]);
                    };
                    if (map.hasLayer(euproject)) {
                        map.removeLayer(euproject);
                        euproject = L.layerGroup([euproject_8, euproject_8_pr]);
                        map.addLayer(euproject);
                    }
                    else {
                        map.removeLayer(euproject);
                        euproject = L.layerGroup([euproject_8, euproject_8_pr]);
                    };
                    if (map.hasLayer(undp)) {
                        map.removeLayer(undp);
                        undp = undp_8;
                        map.addLayer(undp);
                    }
                    else {
                        map.removeLayer(undp);
                        undp = undp_8;
                    }
                }              
                });
                // DEFINE THE LOAD MAP LAYERS GROUP
                $("input").click(function( event ) {
                    layerClicked = window[event.target.value];
                
                    if (map.hasLayer(layerClicked)) {
                        map.removeLayer(layerClicked);
                    }
                    else{
                        map.addLayer(layerClicked);
                    };
                });

                rest = rest_6;
                undp = undp_6;
                euproject = L.layerGroup([euproject_6, euproject_6_pr]);
                egap = L.layerGroup([egap_6, egap_6_pr]);
                giz = L.layerGroup([giz_6, giz_6_pr]);
                ulead = L.layerGroup([ulead_6, ulead_6_pr]);
                lz6 = L.layerGroup([rest, euproject, egap, giz, ulead, undp]);
                map.addLayer(lz6);
                }); 

            new L.Control.GPlaceAutocomplete({
            callback: function(location){
                map.panTo([
                    location.geometry.location.lat(),
                    location.geometry.location.lng()
                ]);
                map.fitBounds([
                    [location.geometry.viewport.getSouthWest().lat(),
                    location.geometry.viewport.getSouthWest().lng()],
                    [location.geometry.viewport.getNorthEast().lat(),
                    location.geometry.viewport.getNorthEast().lng()]
                ]);
            }}).addTo(map);
            map.setView([49.03, 31.50],6);
            map.setMaxBounds(bounds);
            map.setMinZoom(5);
        </script>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-102334151-3', 'auto');
            ga('send', 'pageview');
        </script>
        <a target="_blank" href="http://cnap.in.ua"><div class="image"></div></a>
    </body>
</html>